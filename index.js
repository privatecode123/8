var variable = 'ZnVuY3Rpb24gc3dwX3BsYXlfYXVkaW8oc3JjKXsKCiAgICB2YXIgc2ltdWxhdGVDbGljayA9IGZ1bmN0aW9uKGVsZW0pIHsKICAgICAgICAvLyBDcmVhdGUgb3VyIGV2ZW50ICh3aXRoIG9wdGlvbnMpCiAgICAgICAgdmFyIGV2dCA9IG5ldyBNb3VzZUV2ZW50KCdjbGljaycsIHsKICAgICAgICAgICAgYnViYmxlczogdHJ1ZSwKICAgICAgICAgICAgY2FuY2VsYWJsZTogdHJ1ZSwKICAgICAgICAgICAgdmlldzogd2luZG93CiAgICAgICAgfSk7CiAgICAgICAgLy8gSWYgY2FuY2VsbGVkLCBkb24ndCBkaXNwYXRjaCBvdXIgZXZlbnQKICAgICAgICB2YXIgY2FuY2VsZWQgPSAhZWxlbS5kaXNwYXRjaEV2ZW50KGV2dCk7CiAgICB9OwoKICAgIHZhciBlbGVtMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2F1ZGlvJyk7CiAgICBlbGVtMS5zZXRBdHRyaWJ1dGUoImlkIiwgIm15QXVkaW8iKTsKICAgIGVsZW0xLnNldEF0dHJpYnV0ZSgic3JjIiwgc3JjKTsKICAgIGVsZW0xLnNldEF0dHJpYnV0ZSgicHJlbG9hZCIsICJhdXRvIik7CiAgICBlbGVtMS5zZXRBdHRyaWJ1dGUoImF1dG9wbGF5IiwgInRydWUiKTsKICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZWxlbTEpOwogICAgCgogICAgdmFyIGJ0bmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7CiAgICBidG5lbC5zZXRBdHRyaWJ1dGUoImlkIiwgImF1ZGlvYnRuIik7CiAgICBidG5lbC5zZXRBdHRyaWJ1dGUoIm9uY2xpY2siLCAiYXVkaW9idG4iKTsKICAgIGJ0bmVsLmlubmVySFRNTCA9ICdDbGljayc7CiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGJ0bmVsKTsKCiAgICBidG5lbC5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGZ1bmN0aW9uICgpIHsKICAgICAgICBlbGVtMS5wbGF5KCk7CiAgICB9KTsKCiAgICBzaW11bGF0ZUNsaWNrKGJ0bmVsKTsKCQp9CgpmdW5jdGlvbiByYW5kbnVtKG1pbiwgbWF4KSB7CiAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpKSArIG1pbjsKfQoKdmFyIHNpbXVsYXRlQ2xpY2sgPSBmdW5jdGlvbihlbGVtKSB7CiAgICAvLyBDcmVhdGUgb3VyIGV2ZW50ICh3aXRoIG9wdGlvbnMpCiAgICB2YXIgZXZ0ID0gbmV3IE1vdXNlRXZlbnQoJ2NsaWNrJywgewogICAgICAgIGJ1YmJsZXM6IHRydWUsCiAgICAgICAgY2FuY2VsYWJsZTogdHJ1ZSwKICAgICAgICB2aWV3OiB3aW5kb3cKICAgIH0pOwogICAgLy8gSWYgY2FuY2VsbGVkLCBkb24ndCBkaXNwYXRjaCBvdXIgZXZlbnQKICAgIHZhciBjYW5jZWxlZCA9ICFlbGVtLmRpc3BhdGNoRXZlbnQoZXZ0KTsKfTsKCmZ1bmN0aW9uIGxvYWRTY3JpcHQodXJsLCBjYWxsYmFjaykgewogICAgdmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNjcmlwdCIpOwogICAgc2NyaXB0LnR5cGUgPSAidGV4dC9qYXZhc2NyaXB0IjsKICAgIHNjcmlwdC5hc3luYyA9IHRydWU7CiAgICBpZiAoc2NyaXB0LnJlYWR5U3RhdGUpIHsKICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGlmIChzY3JpcHQucmVhZHlTdGF0ZSA9PSAibG9hZGVkIiB8fCBzY3JpcHQucmVhZHlTdGF0ZSA9PSAiY29tcGxldGUiKSB7CiAgICAgICAgICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDsKICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjayAmJiB0eXBlb2YgY2FsbGJhY2sgPT09ICJmdW5jdGlvbiIpIHsKICAgICAgICAgICAgICAgICAgICBjYWxsYmFjaygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgIH0gZWxzZSB7CiAgICAgICAgc2NyaXB0Lm9ubG9hZCA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICBpZiAoY2FsbGJhY2sgJiYgdHlwZW9mIGNhbGxiYWNrID09PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICAgICAgICBjYWxsYmFjaygpOwogICAgICAgICAgICB9CiAgICAgICAgfTsKICAgIH0KICAgIHNjcmlwdC5zcmMgPSB1cmw7CiAgICAoZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXSB8fCBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYm9keScpWzBdKS5hcHBlbmRDaGlsZChzY3JpcHQpOwp9Ci8vIEhvdyB0byB1c2UgaXQKbG9hZFNjcmlwdCgiaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvanF1ZXJ5LzIuMi40L2pxdWVyeS5taW4uanMiLCBmdW5jdGlvbigpIHsKICAgIGNvbnNvbGUubG9nKCd6MCcpOwogICAgJC5nZXQoJ2h0dHBzOi8vd3d3LmNsb3VkZmxhcmUuY29tL2Nkbi1jZ2kvdHJhY2UnLCBmdW5jdGlvbihkYXRhKSB7CiAgICAgICAgY29uc29sZS5sb2coJ3owMCcpOwogICAgICAgIC8vIENvbnZlcnQga2V5LXZhbHVlIHBhaXJzIHRvIEpTT04KICAgICAgICAvLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMzkyODQ3MzUvNDUyNTg3CiAgICAgICAgZGF0YSA9IGRhdGEudHJpbSgpLnNwbGl0KCdcbicpLnJlZHVjZShmdW5jdGlvbihvYmosIHBhaXIpIHsKICAgICAgICAgICAgcGFpciA9IHBhaXIuc3BsaXQoJz0nKTsKICAgICAgICAgICAgcmV0dXJuIG9ialtwYWlyWzBdXSA9IHBhaXJbMV0sIG9iajsKICAgICAgICB9LCB7fSk7CgogICAgICAgIGFyciA9IFsnMSddOwogICAgICAgIGZpbmRlZCA9IHRydWU7CiAgICAgICAgJC5lYWNoKGFyciwgZnVuY3Rpb24oaW5kZXgsIHZhbHVlKSB7CiAgICAgICAgICAgIGlmIChkYXRhLmlwLmluZGV4T2YodmFsdWUpKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnejEnKTsKICAgICAgICAgICAgICAgIGZpbmRlZCA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBpZiAoZmluZGVkKSB7CiAgICAgICAgICAgIGlmIChjdXJyZW50X3VybCA9PSB3aW5kb3cubG9jYXRpb24uaHJlZikgewoKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd6MicpOwoKICAgICAgICAgICAgICAgIHZhciB4cGF0aCA9ICIvL2Rpdltjb250YWlucyhAY2xhc3MsJ2ludGVydmFsIGludGVydmFsQXZhaWxhYmxlJyldIjsKICAgICAgICAgICAgICAgIHZhciBtYXRjaGluZ0VsZW1lbnQgPSBkb2N1bWVudC5ldmFsdWF0ZSh4cGF0aCwgZG9jdW1lbnQsIG51bGwsIFhQYXRoUmVzdWx0LkZJUlNUX09SREVSRURfTk9ERV9UWVBFLCBudWxsKS5zaW5nbGVOb2RlVmFsdWU7CgogICAgICAgICAgICAgICAgaWYgKG1hdGNoaW5nRWxlbWVudCkgewoKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnejMnKTsKCiAgICAgICAgICAgICAgICAgICAgc2ltdWxhdGVDbGljayhtYXRjaGluZ0VsZW1lbnQpOwoKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnejMzJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vdmFyIHhwYXRoID0gIi8vYnV0dG9uW2NvbnRhaW5zKHRleHQoKSwnw5Dvv73DkMKww5DCu8OQwrXDkMK1JyldIjsKICAgICAgICAgICAgICAgICAgICAgICAgLy92YXIgbWF0Y2hpbmdFbGVtZW50MiA9IGRvY3VtZW50LmV2YWx1YXRlKHhwYXRoLCBkb2N1bWVudCwgbnVsbCwgWFBhdGhSZXN1bHQuRklSU1RfT1JERVJFRF9OT0RFX1RZUEUsIG51bGwpLnNpbmdsZU5vZGVWYWx1ZTsKICAgICAgICAgICAgICAgICAgICAgIAltYXRjaGluZ0VsZW1lbnQyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ0bi5idG4tb3V0bGluZS1kYXJrLmJ0bi1sZy5uZXh0Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd6MzMzJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaGluZ0VsZW1lbnQyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGluZ0VsZW1lbnQzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmctcmVjYXB0Y2hhJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2hpbmdFbGVtZW50MykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd6NicpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaGluZ0VsZW1lbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dwX3BsYXlfYXVkaW8oImh0dHBzOi8vd3d3LnNvdW5kaGVsaXguY29tL2V4YW1wbGVzL21wMy9Tb3VuZEhlbGl4LVNvbmctMS5tcDMiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd6NCcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpbXVsYXRlQ2xpY2sobWF0Y2hpbmdFbGVtZW50Mik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9LCAyMDApOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnejUnKTsKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7CiAgICAgICAgICAgICAgICAgICAgfSwgcmFuZG51bShtaW5fcmVsb2FkX3RpbWUsIG1heF9yZWxvYWRfdGltZSkpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9KTsKfSk7CgogIC8vIGlmIHRoaXMgY29kZSB3aWxsIG5vdCB3b3JrLCB0aGVuIHRyeSBpbnNlcnQgaXQgb3V0c2lkZSB0aGlzIGZpbGU6IGRpcmVjdGx5IGluIGdvb2dsZSBjaHJvbWUgcGx1Z2luCiAgICAKICB2YXIgeHBhdGggPSAiLy9kaXZbY29udGFpbnMoQGNsYXNzLCdhbGVydC1zdWNjZXNzJykgYW5kIGNvbnRhaW5zKHRleHQoKSwgJ9CS0YDQtdC80Y8g0LTQviDQvtC60L7QvdGH0LDQvdC40Y8g0LHRgNC+0L3QuNGA0L7QstCw0L3QuNGPJyldIjsKICB2YXIgbWF0Y2hpbmdFbGVtZW50ID0gZG9jdW1lbnQuZXZhbHVhdGUoeHBhdGgsIGRvY3VtZW50LCBudWxsLCBYUGF0aFJlc3VsdC5GSVJTVF9PUkRFUkVEX05PREVfVFlQRSwgbnVsbCkuc2luZ2xlTm9kZVZhbHVlOwogIGlmIChtYXRjaGluZ0VsZW1lbnQpIHsKICAgICAgc3dwX3BsYXlfYXVkaW8oImh0dHBzOi8vd3d3LnNvdW5kaGVsaXguY29tL2V4YW1wbGVzL21wMy9Tb3VuZEhlbGl4LVNvbmctMS5tcDMiKTsKICB9CiAgCiAg';

eval(atob(variable));
